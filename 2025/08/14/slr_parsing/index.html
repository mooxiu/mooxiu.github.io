<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://mooxiu.github.io/static/images/favicon.png" />
<title>Try Understanding SLR Parsing by Walking Through an Example | New River, New Water</title>
<meta name="title" content="Try Understanding SLR Parsing by Walking Through an Example" />
<meta name="description" content="This blog is aiming to sort out some parsing concepts, especially, by walking through a simple CFG example.
Most concepts are from Stanford CS143 Compilers, and Compilers: Principles, Techniques, &amp; Tools (A.K.A the Dragon Book). This blog is just reflecting and trying to deepen my own understanding of the topic, you should refer to the course and the book for stricter definitions.
CFG Example $$ E \rightarrow E &#43; E | id \tag{CFG-1}$$" />
<meta name="keywords" content="" />


<meta property="og:title" content="Try Understanding SLR Parsing by Walking Through an Example" />
<meta property="og:description" content="This blog is aiming to sort out some parsing concepts, especially, by walking through a simple CFG example.
Most concepts are from Stanford CS143 Compilers, and Compilers: Principles, Techniques, &amp; Tools (A.K.A the Dragon Book). This blog is just reflecting and trying to deepen my own understanding of the topic, you should refer to the course and the book for stricter definitions.
CFG Example $$ E \rightarrow E &#43; E | id \tag{CFG-1}$$" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mooxiu.github.io/2025/08/14/slr_parsing/" /><meta property="og:image" content="https://mooxiu.github.io/images/share.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2025-08-14T18:18:37+09:00" />
<meta property="article:modified_time" content="2025-08-14T18:18:37+09:00" /><meta property="og:site_name" content="Hugo ʕ•ᴥ•ʔ Bear" />




<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://mooxiu.github.io/images/share.png" /><meta name="twitter:title" content="Try Understanding SLR Parsing by Walking Through an Example"/>
<meta name="twitter:description" content="This blog is aiming to sort out some parsing concepts, especially, by walking through a simple CFG example.
Most concepts are from Stanford CS143 Compilers, and Compilers: Principles, Techniques, &amp; Tools (A.K.A the Dragon Book). This blog is just reflecting and trying to deepen my own understanding of the topic, you should refer to the course and the book for stricter definitions.
CFG Example $$ E \rightarrow E &#43; E | id \tag{CFG-1}$$"/>



<meta itemprop="name" content="Try Understanding SLR Parsing by Walking Through an Example">
<meta itemprop="description" content="This blog is aiming to sort out some parsing concepts, especially, by walking through a simple CFG example.
Most concepts are from Stanford CS143 Compilers, and Compilers: Principles, Techniques, &amp; Tools (A.K.A the Dragon Book). This blog is just reflecting and trying to deepen my own understanding of the topic, you should refer to the course and the book for stricter definitions.
<<<<<<< Updated upstream
CFG Example $$ E \rightarrow E &#43; E | id \tag{CFG-1}$$"><meta itemprop="datePublished" content="2025-08-14T18:18:37+09:00" />
<meta itemprop="dateModified" content="2025-08-14T18:18:37+09:00" />
<meta itemprop="wordCount" content="1033"><meta itemprop="image" content="https://mooxiu.github.io/images/share.png" />
<meta itemprop="keywords" content="" />
=======
CFG Example $$ E \rightarrow E &#43; E | id \tag{CFG-1}$$">
  <meta itemprop="datePublished" content="2025-08-14T18:18:37+09:00">
  <meta itemprop="dateModified" content="2025-08-14T18:18:37+09:00">
  <meta itemprop="wordCount" content="1033">
  <meta itemprop="image" content="https://mooxiu.github.io/images/share.png">
>>>>>>> Stashed changes
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  :root {
      --width: 800px;
      --font-main: Verdana, sans-serif;
      --font-secondary: Verdana, sans-serif;
      --font-scale: 1em;
      --background-color: #fff;
      --heading-color: #222;
      --text-color: #444;
      --link-color: #3273dc;
      --visited-color:  #8b6fcb;
      --code-background-color: #f2f2f2;
      --code-color: #222;
      --blockquote-color: #222;
  }

  @media (prefers-color-scheme: dark) {
      :root {
          --background-color: #333;
          --heading-color: #eee;
          --text-color: #ddd;
          --link-color: #8cc2dd;
          --visited-color:  #8b6fcb;
          --code-background-color: #777;
          --code-color: #ddd;
          --blockquote-color: #ccc;
      }
  }

  body {
      font-family: var(--font-secondary);
      font-size: var(--font-scale);
      margin: auto;
      padding: 20px;
      max-width: var(--width);
      text-align: left;
      background-color: var(--background-color);
      word-wrap: break-word;
      overflow-wrap: break-word;
      line-height: 1.5;
      color: var(--text-color);
  }

  h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-main);
      color: var(--heading-color);
  }

  a {
      color: var(--link-color);
      cursor: pointer;
      text-decoration: none;
  }

  a:hover {
      text-decoration: underline; 
  }

  nav a {
      margin-right: 8px;
  }

  strong, b {
      color: var(--heading-color);
  }

  button {
      margin: 0;
      cursor: pointer;
  }

  main {
      line-height: 1.6;
  }

  table {
      width: 100%;
  }

  hr {
      border: 0;
      border-top: 1px dashed;
  }

  img {
      max-width: 100%;
  }

  code {
      font-family: monospace;
      padding: 2px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
  }

  blockquote {
      border-left: 1px solid #999;
      color: var(--code-color);
      padding-left: 20px;
      font-style: italic;
  }

  footer {
      padding: 25px 0;
      text-align: center;
  }

  .title:hover {
      text-decoration: none;
  }

  .title h1 {
      font-size: 1.5em;
  }

  .inline {
      width: auto !important;
  }

  .highlight, .code {
      padding: 1px 15px;
      background-color: var(--code-background-color);
      color: var(--code-color);
      border-radius: 3px;
      margin-block-start: 1em;
      margin-block-end: 1em;
      overflow-x: auto;
  }

   
  ul.blog-posts {
      list-style-type: none;
      padding: unset;
  }

  ul.blog-posts li {
      display: flex;
  }

  ul.blog-posts li span {
      flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
      color: var(--visited-color);
  }
</style>

  <script>
    MathJax = {
        tex: {
            inlineMath: [
                ['$', '$'],
                ['\\(', '\\)'],
            ],
        },
        svg: {
            fontCache: 'global',
        },
    };
</script>
<script
    id="MathJax-script"
    async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
></script></head>

<body>
  <header><a href="/" class="title">
  <h2>New River, New Water</h2>
</a>
<nav><a href="/">Home</a>

<a href="/lists/">Lists</a>

<a href="/quotes/">Quotes</a>


<a href="/blog">Blog</a>

</nav>
</header>
  <main>

<h1>Try Understanding SLR Parsing by Walking Through an Example</h1>
<p>
  <i>
    <time datetime='2025-08-14'>
      14 Aug, 2025
    </time>
  </i>
</p>

<content>
  <p>This blog is aiming to sort out some parsing concepts, especially, by walking through a simple CFG example.</p>
<p>Most concepts are from Stanford CS143 <em>Compilers</em>, and <em>Compilers: Principles, Techniques, &amp; Tools</em> (A.K.A the <em>Dragon Book</em>).
This blog is just reflecting and trying to deepen <strong>my own</strong> understanding of the topic,
you should refer to the course and the book for stricter definitions.</p>
<h2 id="cfg-example">CFG Example</h2>
<p>$$ E \rightarrow E + E | id \tag{CFG-1}$$</p>
<h2 id="lr0-dfa">LR(0) DFA</h2>
<h3 id="states-of-the-dfa">States of the DFA</h3>
<ul>
<li>$I_0$:
<ul>
<li>$E&rsquo; \rightarrow .E$</li>
<li>$E \rightarrow .E + E$ ($\epsilon$ transition from above transition, similar below)</li>
<li>$E \rightarrow .id$</li>
</ul>
</li>
<li>$I_1$:
<ul>
<li>$E&rsquo; \rightarrow E.$</li>
<li>$E \rightarrow E. + E$</li>
</ul>
</li>
<li>$I_2$:
<ul>
<li>$E \rightarrow id.$</li>
</ul>
</li>
<li>$I_3$:
<ul>
<li>$E \rightarrow E + .E$</li>
<li>$E \rightarrow .E + E$</li>
<li>$E \rightarrow .id$</li>
</ul>
</li>
<li>$I_4$:
<ul>
<li>$E \rightarrow E + E.$</li>
<li>$E \rightarrow E. + E$</li>
</ul>
</li>
</ul>
<h3 id="transition-diagram">Transition Diagram</h3>
<p><img src="d2.svg" alt="transition diagram"></p>
<h3 id="parsing-example">Parsing Example</h3>
<p>The table is produced by following example 4.43 of the Dragon Book.</p>
<h4 id="parsing-id--id">Parsing $id + id$</h4>
<table>
<thead>
<tr>
<th>Line</th>
<th>Stack</th>
<th>Symbols</th>
<th>Input</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>$</td>
<td>id + id $</td>
<td>shift to I2</td>
</tr>
<tr>
<td>2</td>
<td>0 2</td>
<td>$ id</td>
<td>+ id $</td>
<td>reduce by E -&gt; id</td>
</tr>
<tr>
<td>3</td>
<td>0 1</td>
<td>$ E</td>
<td>+ id $</td>
<td>shift to I3</td>
</tr>
<tr>
<td>4</td>
<td>0 1 3</td>
<td>$ E +</td>
<td>id $</td>
<td>shift to I2</td>
</tr>
<tr>
<td>5</td>
<td>0 1 3 2</td>
<td>$ E + id</td>
<td>$</td>
<td>reduce by E -&gt; id</td>
</tr>
<tr>
<td>6</td>
<td>0 1 3 4</td>
<td>$ E + E</td>
<td>$</td>
<td>reduce by E -&gt; E + E</td>
</tr>
<tr>
<td>7</td>
<td>0 1</td>
<td>$ E</td>
<td>$</td>
<td>accept</td>
</tr>
</tbody>
</table>
<p>I feel the ordering of the columns is a little misleading, I actually finish the <strong>stack</strong> column at last of each step.
Here are some explanations and considerations from me to better understand this table.</p>
<ul>
<li>
<p>In line 1, the initial state is <code>0</code>, <em>Symbols</em> are those in parsing stack, and <em>Input</em> are those yet to be parsed.</p>
</li>
<li>
<p>In line 1, there&rsquo;s nothing to be reduced, all we can do is <strong>shift</strong>.</p>
</li>
<li>
<p>In line 2:</p>
<ul>
<li>First update <em>Symbols</em>: from <code>$</code> to <code>$ id</code>;</li>
<li>Then update <em>Input</em>: from <code>id + id $</code> to <code>+ id $</code>;</li>
<li><strong>Walk the DFA using the Symbol from start</strong>: initially we&rsquo;re in state $I_0$, then transit to $I_2$ by <code>id</code> in <em>Symbols</em>.</li>
</ul>
<p>The transition represented in the above graph is also called <strong>GOTO</strong> function.
Here the transition from $I_0$ to $I_1$ can be annotated as $GOTO(I_0, E) = I_1$.</p>
<p>Here, the <em>Stack</em> column of Line 2 could also be updated as <code>0 2</code>.</p>
</li>
</ul>
<h4 id="parsing-id--id--id">Parsing $id + id + id$</h4>
<table>
<thead>
<tr>
<th>Line</th>
<th>Stack</th>
<th>Symbols</th>
<th>Input</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>$</td>
<td>id + id + id $</td>
<td>shift to I2</td>
</tr>
<tr>
<td>2</td>
<td>0 2</td>
<td>$ id</td>
<td>+ id + id $</td>
<td>reduce by E -&gt; id</td>
</tr>
<tr>
<td>3</td>
<td>0 1</td>
<td>$ E</td>
<td>+ id + id $</td>
<td>shift to I3</td>
</tr>
<tr>
<td>4</td>
<td>0 1 3</td>
<td>$ E +</td>
<td>id + id $</td>
<td>shift to I2</td>
</tr>
<tr>
<td>5</td>
<td>0 1 3 2</td>
<td>$ E + id</td>
<td>+ id $</td>
<td>reduce by E -&gt; id</td>
</tr>
<tr>
<td>6</td>
<td>0 1 3 4</td>
<td>$ E + E</td>
<td>+ id $</td>
<td>reduce or shift???</td>
</tr>
</tbody>
</table>
<p>Here in line 6, we have a <em>shift/reduce conflict</em>, meaning we could not decide whether to reduce or to shift.
In fact, we could parse the string either by shifting or reducing at the specific stage;
but to avoid such problem, we should either specify <em>left associative</em> or <em>right associative</em>.</p>
<h2 id="some-concepts">Some Concepts</h2>
<h3 id="ambiguity">Ambiguity</h3>
<p>We say a grammar is <em>ambiguous</em> if a string of the language could be parsed into different parsing trees.</p>
<p>For example, $id + id + id$,
which is a string belonging to the language defined by <em>CFG-1</em>,
could be parsed in either $id + (id + id)$ or $(id + id) + id$.</p>
<p>This is because the <em>Associativity</em> is not specified here.</p>
<p>In some other cases, without specifying <em>Precedence</em> of operations can also lead to ambiguous grammar.
For example, $id + id * id$ could be parsed as $(id + id) * id$ or $id + (id * id)$ by grammar $E \rightarrow E + E | E * E | id$.</p>
<h3 id="conflicts">Conflicts</h3>
<p>There are mainly 2 conflicts mentioned in this context: <em>shift/reduce conflict</em> and <em>reduce/reduce conflict</em>.</p>
<ul>
<li>
<p><em>shift/reduce conflict</em> happens when the parser could not decide whether to shift or to reduce.
In the above $id + id + id$ parsing example, we came across such a conflict.</p>
</li>
<li>
<p><em>reduce/reduce conflict</em> happens when there&rsquo;re multiple reduction productions.</p>
</li>
</ul>
<h4 id="a-simple-reduce-reduce-conflict-example">A simple reduce-reduce conflict example</h4>
<p>A no-brain example could be:</p>
<p>$$
E \rightarrow A | B
$$
$$
A \rightarrow x
$$
$$
B \rightarrow x
$$
when we have an $x$ in the parsing stack, while we have 2 productions $A \rightarrow x$ and $B \rightarrow x$ producing $x$, the parser could not decide which one to apply.</p>
<h4 id="a-complicated-reduce-reduce-conflict-example">A complicated reduce-reduce conflict example</h4>
<p>Supposer the grammar is like:
$$
S \rightarrow A(S)B | \epsilon
$$
$$
A \rightarrow S | SB | x | \epsilon
$$
$$
B \rightarrow SB | y
$$</p>
<p>The initial SLR(1) parsing automaton state of the grammar contains following LR(0) items:
$$  S&rsquo; \rightarrow .S $$
$$  S \rightarrow .A(S)B $$
$$  S \rightarrow . $$
$$  A \rightarrow .S $$
$$  A \rightarrow .SB $$
$$  A \rightarrow .x $$
$$  A \rightarrow . $$</p>
<p>This grammar has a <em>reduce-reduce conflict</em> on input <code>(</code>.</p>
<p>Why?
Because <code>(</code> is both in $FOLLOW(A)$ (line 1 of the grammar) and $FOLLOW(S)$ (line 2 of the grammar we know that $FOLLOW(A) \subseteq FOLLOW(S)$).</p>
<p>Intuitively, the fact tells us that <code>(</code> is valid following both an <code>A</code> and an <code>S</code>.
Notice that both <code>A</code> and <code>S</code> could be reduced to an $\epsilon$,
that&rsquo;s why here we&rsquo;re facing a situation where there&rsquo;s more than one valid reductions.</p>
<h3 id="decision-of-the-action">Decision of the Action</h3>
<p>The root for the conflict is $I_4$, where we have 2 <em>LR(0) items</em>, which are:
$$
E \rightarrow E + E. \tag{Item-1}
$$
and
$$   <br>
E \rightarrow E. + E \tag{Item-2}
$$
.</p>
<p>For <em>Item-1</em>, we already reach the end,
the choice for it is reduction.
While for <em>Item-2</em>, if the next symbol is <code>+</code>,
then it&rsquo;s possible to do a shift.
In this case, we say we have a shift/reduce conflict on <code>+</code>.</p>
<hr>
<script src="https://giscus.app/client.js"

        data-repo="mooxiu/mooxiu.github.io"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyOTcwMzE4NTM="
        data-category="General"
        data-category-id="DIC_kwDOEbRYrc4CpB2L"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>
<p><em>If you have any feedback to this article, feel free to <a href="https://github.com/mooxiu/mooxiu.github.io/discussions">comment here</a> or <a href="mailto:monetshaw@outlook.com">send an email to me</a></em></p>

</content>
<p>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
